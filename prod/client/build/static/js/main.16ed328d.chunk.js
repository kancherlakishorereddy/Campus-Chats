(this.webpackJsonpcc=this.webpackJsonpcc||[]).push([[0],{149:function(e,t,a){},150:function(e,t,a){},275:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(33),c=a.n(r),i=(a(149),a(150),a(5)),u=a(46),l=a(8),o=a(283),j=a(281),d=a(144),m=a(280),b=a(7),p=a.n(b),h=a(13),x=a(279),f=a(105).default,O=function(){var e=Object(h.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.get("/api/auth/checkUser",{withCredentials:!0});case 3:if(401!==(t=e.sent).data.status){e.next=8;break}return e.abrupt("return",{signedin:!1,message:t.data.message,userInfo:null});case 8:return a=(a=t.data.email).substring(0,a.indexOf("@")),e.abrupt("return",{signedin:!0,message:null,userInfo:{_id:t.data._id,email:t.data.email,name:a}});case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",{signedin:!1,message:null,userInfo:null});case 16:case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(h.a)(p.a.mark((function e(t){var a,s,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,s=t.password,e.prev=1,e.next=4,f.post("/api/auth/signin",{email:a,password:s});case 4:if(401!==(n=e.sent).data.status){e.next=9;break}return e.abrupt("return",{signedin:!1,message:n.data.message});case 9:return r=(r=n.data.email).substring(0,r.indexOf("@")),e.abrupt("return",{signedin:!0,userInfo:{_id:n.data._id,email:n.data.email,name:r}});case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(1),e.abrupt("return",{signedin:!1,message:"Internal Server Error: Try Again"});case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(h.a)(p.a.mark((function e(t){var a,s,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,s=t.password,e.prev=1,e.next=4,f.post("/api/auth/signup",{email:a,password:s});case 4:if(401!==(n=e.sent).data.status){e.next=9;break}return e.abrupt("return",{signedup:!1,message:n.data.message});case 9:return e.abrupt("return",{signedup:!0,message:"Sign Up Successful. Check the Confirmation Mail sent to your Email Address"});case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",{signedup:!1,message:"Internal Server Error: Try Again"});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.post("/api/auth/signout",{},{withCredentials:!0});case 3:if(200!==e.sent.status){e.next=8;break}return e.abrupt("return",{status:200,message:"Signed out successfully"});case 8:return e.abrupt("return",{status:500,message:"Failed to Sign you out. Try again later."});case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",{status:500,message:"Failed to Sign you out. Try again later."});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(h.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.post("/api/auth/confirm/"+t).catch((function(e){}));case 3:if(200!==(a=e.sent).status){e.next=8;break}return e.abrupt("return",{verified:!0,message:a.data.message});case 8:return e.abrupt("return",{verified:!1,message:"failed"});case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",{verified:!1,message:"failed"});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),N=a(278),k=a(285),S=a(1);function C(e){return"dark"===e||"primary"===e}function A(e){var t=e.variant,a=e.message,n=e.action,r=e.callback,c=Object(s.useState)(!0),u=Object(i.a)(c,2),l=u[0],o=u[1];return Object(S.jsx)(N.a,{className:"px-2 py-5 my-5",position:"top-end",style:{zIndex:1},children:Object(S.jsxs)(k.a,{className:"d-inline-block m-1",bg:t,onClose:function(){o(!1),r()},show:l,delay:5e3,autohide:!0,children:[Object(S.jsx)(k.a.Header,{children:Object(S.jsxs)("strong",{className:"me-auto text-dark",children:["Campus Chats | ",n]})}),Object(S.jsx)(k.a.Body,{className:C(t)&&"text-white",children:Object(S.jsx)("strong",{children:a})})]})})}function z(e){var t=e.className;return Object(S.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:[Object(S.jsx)("path",{d:"M8.515 1.019A7 7 0 0 0 8 1V0a8 8 0 0 1 .589.022l-.074.997zm2.004.45a7.003 7.003 0 0 0-.985-.299l.219-.976c.383.086.76.2 1.126.342l-.36.933zm1.37.71a7.01 7.01 0 0 0-.439-.27l.493-.87a8.025 8.025 0 0 1 .979.654l-.615.789a6.996 6.996 0 0 0-.418-.302zm1.834 1.79a6.99 6.99 0 0 0-.653-.796l.724-.69c.27.285.52.59.747.91l-.818.576zm.744 1.352a7.08 7.08 0 0 0-.214-.468l.893-.45a7.976 7.976 0 0 1 .45 1.088l-.95.313a7.023 7.023 0 0 0-.179-.483zm.53 2.507a6.991 6.991 0 0 0-.1-1.025l.985-.17c.067.386.106.778.116 1.17l-1 .025zm-.131 1.538c.033-.17.06-.339.081-.51l.993.123a7.957 7.957 0 0 1-.23 1.155l-.964-.267c.046-.165.086-.332.12-.501zm-.952 2.379c.184-.29.346-.594.486-.908l.914.405c-.16.36-.345.706-.555 1.038l-.845-.535zm-.964 1.205c.122-.122.239-.248.35-.378l.758.653a8.073 8.073 0 0 1-.401.432l-.707-.707z"}),Object(S.jsx)("path",{d:"M8 1a7 7 0 1 0 4.95 11.95l.707.707A8.001 8.001 0 1 1 8 0v1z"}),Object(S.jsx)("path",{d:"M7.5 3a.5.5 0 0 1 .5.5v5.21l3.248 1.856a.5.5 0 0 1-.496.868l-3.5-2A.5.5 0 0 1 7 9V3.5a.5.5 0 0 1 .5-.5z"})]})}var E=z,I=function(e){var t=e.className;return Object(S.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:[Object(S.jsx)("path",{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"}),Object(S.jsx)("path",{fillRule:"evenodd",d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"})]})},H=function(e){var t=e.className;return Object(S.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:[Object(S.jsx)("path",{fillRule:"evenodd",d:"M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"}),Object(S.jsx)("path",{fillRule:"evenodd",d:"M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"})]})},L=function(e){var t=e.className;return Object(S.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:Object(S.jsx)("path",{d:"M2 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})})},P=function(e){var t=e.className;return Object(S.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:Object(S.jsx)("path",{d:"M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5z"})})},T=function(e){var t=e.className;return Object(S.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:[Object(S.jsx)("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),Object(S.jsx)("path",{fillRule:"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})]})},M=function(){var e=Object(h.a)(p.a.mark((function e(t,a){var s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a("pending"),e.next=3,w();case 3:s=e.sent,a("done"),200===s.status?t():s.message;case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();function F(e){var t=e.resetUser,a=(e.user,Object(s.useState)("done")),n=Object(i.a)(a,2),r=n[0],c=n[1];return"pending"===r?Object(S.jsx)(x.a,{variant:"light",className:"mx-2",animation:"border",role:"status",children:Object(S.jsx)("span",{className:"visually-hidden",children:"Logging Out..."})}):Object(S.jsxs)(m.a,{variant:"outline-light",className:"shadow-none",onClick:Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t,c);case 2:case"end":return e.stop()}}),e)}))),children:[Object(S.jsx)(H,{className:"me-2"}),"Sign Out"]})}function V(e){var t=e.resetUser,a=e.isAuth,s=e.user;return Object(S.jsx)(o.a,{collapseOnSelect:!0,expand:"md",bg:"primary",variant:"dark",children:Object(S.jsxs)(j.a,{fluid:"lg",children:[Object(S.jsx)(o.a.Brand,{children:"Campus Chats"}),Object(S.jsx)(o.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(S.jsx)(o.a.Collapse,{id:"responsive-navbar-nav",children:a&&Object(S.jsxs)(d.a,{className:"ms-auto",children:[Object(S.jsxs)("div",{className:"d-flex flex-nowrap justify-content-around",children:[Object(S.jsx)(u.c,{to:"/home",className:"my-md-auto my-2",children:Object(S.jsxs)(m.a,{variant:"outline-light",className:"shadow-none border-primary",children:[Object(S.jsx)(P,{className:"me-2"}),"Home"]})}),Object(S.jsx)(u.c,{to:"/profile",className:"mx-4 my-md-auto my-2",children:Object(S.jsxs)(m.a,{variant:"outline-light",className:"shadow-none border-primary",children:[Object(S.jsx)(I,{className:"me-2"}),"Profile"]})})]}),Object(S.jsx)(F,{resetUser:t,user:s})]})})]})})}function B(){return Object(S.jsx)("footer",{className:"bg-primary text-white text-center py-2 my-0",children:Object(S.jsxs)(j.a,{fluid:"md",className:"d-flex flex-wrap justify-content-around",children:[Object(S.jsxs)("div",{className:"my-2",children:[" In case of any issues drop an email at ",Object(S.jsx)("a",{href:"mailto:campuschats.cc@gmail.com",target:"_blank",rel:"noreferrer",children:"campuschats.cc@gmail.com"})]}),Object(S.jsxs)("div",{className:"my-2",children:[" -Developed by ",Object(S.jsx)("a",{href:"https://kancherlakishorereddy.github.io",target:"_blank",rel:"noreferrer",children:Object(S.jsx)("strong",{children:"K.Kishorereddy"})})]})]})})}var U=function(){window.scrollTo({top:0,behavior:"smooth"})};function D(){var e=Object(s.useState)(!1),t=Object(i.a)(e,2),a=t[0],n=t[1];return window.addEventListener("scroll",(function(){return function(e){var t=document.documentElement.scrollTop;t>128?e(!0):t<=128&&e(!1)}(n)})),Object(S.jsx)("div",{className:"m-4 fixed-bottom d-flex justify-content-start",children:Object(S.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",fill:"#20c997",className:"bi bi-arrow-up-circle-fill rounded-circle shadow-lg",viewBox:"0 0 16 16",style:{display:a?"block":"none"},onClick:U,children:Object(S.jsx)("path",{d:"M16 8A8 8 0 1 0 0 8a8 8 0 0 0 16 0zm-7.5 3.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V11.5z"})})})}var _=a(19),W=a(282),G=a(138),K=a(284),q=a(286),R=function(e){var t=new Date(e.expiresAt);return t.getTime()<(new Date).getTime()?-1:Math.ceil(Math.abs(t-new Date)/36e5)},Y=function(e){var t=new Date(e.createdAt);return Math.ceil(Math.abs(t-new Date)/36e5)};function J(e){var t,a=e.post,s=Y(a),n=R(a);return Object(S.jsx)(G.a,{xs:12,children:Object(S.jsxs)(q.a,{border:"primary",className:"my-2 mx-auto",children:[Object(S.jsxs)(q.a.Header,{children:[Object(S.jsx)("strong",{children:a.subject}),Object(S.jsxs)("span",{className:"float-end",children:["< ",1===s?"1 Hr":"".concat(s," Hrs")," ago"]})]}),Object(S.jsx)(q.a.Body,{children:Object(S.jsx)(q.a.Text,{children:a.post})}),Object(S.jsxs)(q.a.Footer,{children:[Object(S.jsxs)("span",{xs:12,sm:6,children:[" ",Object(S.jsx)("strong",{children:Object(S.jsx)(E,{className:"me-1 fw-bold"})})," Expires in ",Object(S.jsxs)("strong",{children:["< ",n<0?"Expired":1===n?"1 Hr":"".concat(n," Hrs")]})]}),Object(S.jsxs)("span",{className:"float-end",children:["- ",Object(S.jsx)("strong",{children:(t=a.authorName,t.length>20?t.slice(0,12)+" . . .":t)})]})]})]})})}var Q=a(28),X=a(29),Z=a(105).default,$=function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.get("/api/post/getall",{withCredentials:!0});case 3:if(401===(t=e.sent).data.status){e.next=8;break}return e.abrupt("return",{status:"success",posts:t.data.posts});case 8:return e.abrupt("return",{status:"failed",posts:[]});case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",{status:"failed",posts:[]});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(h.a)(p.a.mark((function e(t){var a,s,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.subject,s=t.post,n=t.expiry,e.prev=1,e.next=4,Z.post("/api/post",{subject:a,post:s,expiry:n},{withCredentials:!0});case 4:if(401!==(r=e.sent).data.status){e.next=9;break}return e.abrupt("return",{posted:!1,message:r.data.message,post:null});case 9:return e.abrupt("return",{posted:!0,message:null,post:r.data.post});case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",{posted:!1,message:"Failed to create new post",post:null});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(h.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.delete("api/post/".concat(t),{withCredentials:!0});case 3:if(401!==(a=e.sent).data.status){e.next=8;break}return e.abrupt("return",{status:"failed",message:a.data.message,post:null});case 8:return e.abrupt("return",{status:"success",message:null,post:a.data.post});case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",{status:"failed",message:"Failed to delete the post",post:null});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.get("/api/post/getbyuser",{withCredentials:!0});case 3:if(401===(t=e.sent).data.status){e.next=8;break}return e.abrupt("return",{status:"success",message:null,posts:t.data.posts});case 8:return e.abrupt("return",{status:"failed",message:t.data.message,posts:[]});case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",{status:"failed",message:"Failed to fetch posts",posts:[]});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();function se(){var e="undefined"!==typeof window,t=Object(s.useCallback)((function(){return{width:e?window.innerWidth:null,height:e?window.innerHeight:null}}),[e]),a=Object(s.useState)(t()),n=Object(i.a)(a,2),r=n[0],c=n[1];return Object(s.useEffect)((function(){if(e){function e(){c(t())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}}),[e,t]),r}var ne=1024,re=64,ce=function(){var e=Object(h.a)(p.a.mark((function e(t,a,s,n,r,c){var i,u,l,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.subject,u=t.post,l=t.expiry,s(!0),e.next=4,ee({subject:i,post:u,expiry:l});case 4:(o=e.sent).posted?(a.resetForm(),c(o.post),r("Post created successfully. You can see it in Latest posts.")):n(o.message),s(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,a,s,n,r,c){return e.apply(this,arguments)}}(),ie=X.b().shape({subject:X.c().max(re).required(" "),post:X.c().max(ne).required(" "),expiry:X.a().default(24)});function ue(e){var t=e.addPost,a=Object(s.useState)(!1),n=Object(i.a)(a,2),r=n[0],c=n[1],u=Object(s.useState)(null),l=Object(i.a)(u,2),o=l[0],j=l[1],d=Object(s.useState)(null),b=Object(i.a)(d,2),p=b[0],h=b[1],f=se().width;return Object(S.jsxs)(G.a,{xs:12,children:[Object(S.jsx)(q.a,{border:"primary",className:"m-2 mx-auto",children:Object(S.jsxs)(Q.a,{initialValues:{subject:"",post:"",expiry:24},validationSchema:ie,validateOnBlur:!1,onSubmit:function(e,a){return ce(e,a,c,j,h,t)},children:[Object(S.jsx)(q.a.Header,{children:Object(S.jsx)(K.a.Group,{children:Object(S.jsx)(Q.a.Input,{className:"fw-bold no-outline p-0",name:"subject",placeholder:"Subject",autoComplete:"off",maxLength:re})})}),Object(S.jsx)(q.a.Body,{children:Object(S.jsx)(K.a.Group,{children:Object(S.jsx)(Q.a.Textarea,{rows:2,className:"no-outline p-0",name:"post",placeholder:"Share something with your college community...",maxLength:ne})})}),Object(S.jsx)(q.a.Footer,{children:Object(S.jsxs)("div",{className:"d-flex flex-wrap justify-content-md-between justify-content-xs-around",children:[Object(S.jsx)(G.a,{xs:8,sm:7,className:"mx-auto",children:Object(S.jsxs)(K.a.Group,{className:"input-group mx-auto",children:[Object(S.jsxs)("span",{className:"input-group-text ",children:[Object(S.jsx)(z,{className:"me-sm-2"}),f<576?"":"Expires in"]}),Object(S.jsx)(Q.a.Input,{className:"shadow-none",name:"expiry",type:"number",min:1,max:24,required:!0}),Object(S.jsx)("span",{className:"input-group-text",children:"Hrs"})]})}),Object(S.jsx)(G.a,{xs:4,sm:5,className:"mx-auto d-grid",children:r?Object(S.jsx)(x.a,{animation:"grow",className:"mx-auto"}):Object(S.jsx)(m.a,{variant:"primary",type:"submit",children:" Post  "})})]})})]})}),o&&Object(S.jsx)(A,{variant:"warning",message:o,action:"Create Post",callback:function(){return j(null)}}),p&&Object(S.jsx)(A,{variant:"success",message:p,action:"Create Post",callback:function(){return h(null)}})]})}function le(e){e.user;var t=Object(s.useState)([]),a=Object(i.a)(t,2),n=a[0],r=a[1],c=Object(s.useState)(!0),u=Object(i.a)(c,2),l=u[0],o=u[1],m=Object(s.useState)("Latest"),b=Object(i.a)(m,2),f=b[0],O=b[1],g=Object(s.useState)(""),v=Object(i.a)(g,2),w=v[0],y=v[1],N=Object(s.useState)("subject"),k=Object(i.a)(N,2),C=k[0],A=k[1],z=Object(s.useRef)({order:f,searchTerm:w});function E(e){return"expiringSoon"===f?e.sort((function(e,t){return new Date(e.expiresAt).getTime()-new Date(t.expiresAt).getTime()})):e.sort((function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()})),e}function I(e){return e.forEach((function(e,t,a){e.visible=""===w||-1!==e[C].toLowerCase().indexOf(w),a[t]=e})),e}function H(e){e=I(e=E(e)),r(e)}var P=function(){var e=Object(h.a)(p.a.mark((function e(){var t,a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$();case 2:t=e.sent,a=t.status,s=t.posts,"success"===a?H(s):console.log("fetch failed");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){P().then((function(){o(!1)}));var e=setInterval((function(){P()}),6e4);return function(){clearInterval(e)}}),[]),Object(s.useEffect)((function(){z.current.order!==f&&(z.current.order=f,r(E(n.slice()))),z.current.searchTerm!==w&&(z.current.searchTerm=w,r(I(n.slice())))}),[C,w,f]);return Object(S.jsx)(j.a,{fluid:"lg",children:Object(S.jsxs)(W.a,{className:"mx-auto",style:{maxWidth:"720px"},children:[Object(S.jsx)(ue,{addPost:function(e){H([e].concat(Object(_.a)(n)))}}),Object(S.jsx)(G.a,{xs:12,children:Object(S.jsxs)(d.a,{className:"mx-auto fw-bold d-flex justify-content-center",variant:"pills",defaultActiveKey:"Latest",onSelect:function(e){O(e)},style:{maxWidth:"660px"},children:[Object(S.jsx)(d.a.Item,{className:"m-1",children:Object(S.jsx)(d.a.Link,{eventKey:"Latest",children:"Latest Posts"})}),Object(S.jsx)(d.a.Item,{className:"m-1",children:Object(S.jsx)(d.a.Link,{eventKey:"expiringSoon",children:"Expiring Soon"})}),Object(S.jsx)(d.a.Item,{className:"form-group align-self-center",children:Object(S.jsxs)(K.a.Group,{className:"m-1 input-group",children:[Object(S.jsx)("span",{className:"bg-primary input-group-text",children:Object(S.jsx)(L,{className:"text-white"})}),Object(S.jsxs)(K.a.Select,{className:"shadow-none",style:{maxWidth:"fit-content"},onChange:function(e){var t=e.target.value;y(""),A(t)},children:[Object(S.jsx)("option",{value:"subject",children:"Subject"}),Object(S.jsx)("option",{value:"post",children:"Post"}),Object(S.jsx)("option",{value:"authorName",children:"Posted By"})]}),Object(S.jsx)(K.a.Control,{value:w,type:"text",placeholder:"author"===C?"Filter by username":"post"===C?"Filter by Content":"Filter by subject",className:"shadow-none","aria-label":"Filter by username",onChange:function(e){var t=e.target.value;y(t)}})]})})]})}),l&&Object(S.jsx)(x.a,{className:"my-5 m-auto",animation:"grow",size:"lg",variant:"primary"}),n.map((function(e,t,a){return e.visible&&Object(S.jsx)(J,{post:e},e._id)})),!l&&0===n.length&&Object(S.jsx)("div",{className:"my-5 text-center",children:Object(S.jsxs)("h5",{children:["\ud83d\udc4b Hi there... See this emptiness... ",Object(S.jsx)("br",{})," Why don't you share what you're looking forward to."]})})]})})}var oe=a(287),je=a(50),de=a(288),me=function(){var e=Object(h.a)(p.a.mark((function e(t,a,s,n,r){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.next=3,g({email:t.signinemail,password:t.signinpassword});case 3:c=e.sent,a(!1),c.signedin?(s(c.userInfo),n(!0)):r(c.message);case 6:case"end":return e.stop()}}),e)})));return function(t,a,s,n,r){return e.apply(this,arguments)}}(),be=X.b().shape({signinemail:X.c().trim().lowercase().email("Invalid Email address").required("Email cannot be empty"),signinpassword:X.c().required("Password cannot be empty")});function pe(e){var t=e.setUser,a=e.setAuth,n=Object(s.useState)(!1),r=Object(i.a)(n,2),c=r[0],u=r[1],l=Object(s.useState)(null),o=Object(i.a)(l,2),j=o[0],d=o[1];return Object(S.jsxs)(Q.a,{className:"m-2",initialValues:{signinemail:"",signinpassword:""},initialStatus:"yet to sign in",validationSchema:be,onSubmit:function(e,s){return me(e,u,t,a,d)},children:[Object(S.jsxs)(K.a.Group,{className:"mb-3",children:[Object(S.jsx)(K.a.Label,{children:"Email address"}),Object(S.jsx)(Q.a.Input,{className:"mb-3",name:"signinemail",placeholder:"example@gmail.com"})]}),Object(S.jsxs)(K.a.Group,{className:"mb-3",children:[Object(S.jsx)(K.a.Label,{children:"Password"}),Object(S.jsx)(Q.a.Input,{className:"mb-3",name:"signinpassword",type:"password",placeholder:"Enter password"})]}),Object(S.jsx)("div",{className:"d-grid pt-2",children:c?Object(S.jsx)(x.a,{animation:"grow",className:"mx-auto"}):Object(S.jsx)(m.a,{variant:"primary",type:"submit",children:"  Sign In  "})}),j&&Object(S.jsx)(A,{variant:"warning",message:j,action:"Sign In",callback:function(){return d(null)}})]})}var he=function(){var e=Object(h.a)(p.a.mark((function e(t,a,s,n,r){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,v({email:t.signupemail,password:t.signuppassword});case 3:c=e.sent,s(!1),c.signedup?(r(c.message),a.resetForm()):n(c.message);case 6:case"end":return e.stop()}}),e)})));return function(t,a,s,n,r){return e.apply(this,arguments)}}(),xe=X.b().shape({signupemail:X.c().trim().lowercase().email("Invalid Email address").required("Email cannot be empty"),signuppassword:X.c().min(8,"Password must have atleast 8 characters").required("Password cannot be empty")});function fe(){var e=Object(s.useState)(!1),t=Object(i.a)(e,2),a=t[0],n=t[1],r=Object(s.useState)(null),c=Object(i.a)(r,2),u=c[0],l=c[1],o=Object(s.useState)(null),j=Object(i.a)(o,2),d=j[0],b=j[1];return Object(S.jsxs)(Q.a,{className:"m-2",initialValues:{signupemail:"",signuppassword:""},validationSchema:xe,onSubmit:function(e,t){return he(e,t,n,l,b)},children:[Object(S.jsxs)(K.a.Group,{className:"mb-3",children:[Object(S.jsx)(K.a.Label,{children:"Email address"}),Object(S.jsx)(Q.a.Input,{className:"mb-3",name:"signupemail",placeholder:"example@gmail.com"})]}),Object(S.jsxs)(K.a.Group,{className:"mb-3",children:[Object(S.jsx)(K.a.Label,{children:"Password"}),Object(S.jsx)(Q.a.Input,{className:"mb-3",name:"signuppassword",type:"password",placeholder:"Enter password"})]}),Object(S.jsx)("div",{className:"d-grid pt-2",children:a?Object(S.jsx)(x.a,{animation:"grow",className:"mx-auto"}):Object(S.jsx)(m.a,{variant:"primary",type:"submit",children:"  Sign Up  "})}),u&&Object(S.jsx)(A,{variant:"danger",message:u,action:"Sign Up",callback:function(){l(null)}}),d&&Object(S.jsx)(A,{variant:"success",message:d,action:"Sign Up",callback:function(){b(null)}})]})}function Oe(e){var t=e.setUser,a=e.setAuth;return Object(S.jsx)("div",{className:"rounded shadow p-3 my-4 mx-auto max-vw-100",style:{backgroundColor:"#fff"},children:Object(S.jsxs)(oe.a,{defaultActiveKey:"signin",id:"auth-tab",transition:je.a,className:"d-flex justify-content-center",children:[Object(S.jsxs)(de.a,{eventKey:"signin",title:"Sign In",children:["  ",Object(S.jsx)(pe,{setAuth:a,setUser:t}),"  "]}),Object(S.jsxs)(de.a,{eventKey:"signup",title:"Sign Up",children:["    ",Object(S.jsx)(fe,{}),"  "]})]})})}function ge(e){var t=e.setUser,a=e.isAuth,s=e.setAuth;return Object(S.jsx)(j.a,{fluid:"lg",className:"my-auto",children:Object(S.jsxs)("div",{className:"my-2 row",children:[Object(S.jsxs)("div",{className:"align-self-center m-auto col-12 col-md-9 col-lg-6 order-xs-2",style:{maxWidth:"600px"},children:[Object(S.jsx)("h3",{className:"display-2",children:"Campus Chats"}),Object(S.jsxs)("ul",{children:[Object(S.jsx)("li",{children:Object(S.jsx)("h5",{children:"Join and share things with your college community"})}),Object(S.jsx)("li",{children:Object(S.jsx)("h5",{children:"See what's going on in your campus online and offline"})})]})]}),!a&&Object(S.jsx)("div",{className:"align-self-center m-auto col-12 col-md-7 col-lg-5 order-xs-1",style:{maxWidth:"420px"},children:Object(S.jsx)(Oe,{setUser:t,setAuth:s})})]})})}function ve(e){return"pending"===e?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(x.a,{animation:"grow",size:"lg",className:"mx-3"}),Object(S.jsx)("h5",{children:"Your Email Address is being confirmed..."})]}):"verified"===e?Object(S.jsxs)("h5",{className:"mx-auto",children:["Your Email Address is verified. You can now go to ",Object(S.jsx)(u.b,{to:"/",children:"Home Page"})," and Sign In."]}):"failed"===e?Object(S.jsx)("h5",{className:"mx-auto",children:"Your Email Address verification failed. Please try again."}):void 0}function we(){var e=Object(l.h)().userId,t=Object(s.useState)("pending"),a=Object(i.a)(t,2),n=a[0],r=a[1];return Object(s.useEffect)((function(){y(e).then((function(e){var t=e.verified,a=e.message;r(t?a:"failed")})).catch((function(e){r("failed")}))}),[e]),Object(S.jsx)("div",{className:"text-center my-auto",children:ve(n)})}function ye(e){var t=e.post,a=e.removePost,n=Object(s.useState)(!1),r=Object(i.a)(n,2),c=r[0],u=r[1],l=Y(t),o=R(t),j=se().width,d=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Are you sure that you want to delete this post")){e.next=3;break}return e.abrupt("return");case 3:return u(!0),e.next=6,a(t._id);case 6:u(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsx)(G.a,{xs:12,children:Object(S.jsxs)(q.a,{border:"primary",className:"my-2 mx-auto",children:[Object(S.jsxs)(q.a.Header,{children:[Object(S.jsx)("strong",{children:t.subject}),Object(S.jsxs)("span",{className:"float-end",children:["< ",1===l?"1 Hr":"".concat(l," Hrs")," ago"]})]}),Object(S.jsx)(q.a.Body,{children:Object(S.jsx)(q.a.Text,{children:t.post})}),Object(S.jsx)(q.a.Footer,{children:Object(S.jsxs)(W.a,{xs:2,children:[Object(S.jsxs)(G.a,{xs:8,className:"align-self-center my-2",children:[Object(S.jsx)("strong",{children:Object(S.jsx)(E,{className:"me-1 fw-bold"})})," Expires in ",Object(S.jsxs)("strong",{children:["< ",o<0?"Expired":1===o?"< 1 Hr":"".concat(o," Hrs")]})]}),Object(S.jsx)(G.a,{xs:4,className:"mx-md-auto d-grid",children:c?Object(S.jsx)(x.a,{variant:"danger",animation:"grow",className:"mx-auto"}):Object(S.jsxs)(m.a,{variant:"danger",type:"button",onClick:d,children:[" ",Object(S.jsx)(T,{className:"me-sm-2"})," ",j>=576&&"Delete"," "]})})]})})]})})}function Ne(e){var t=e.user,a=Object(s.useState)([]),n=Object(i.a)(a,2),r=n[0],c=n[1],u=Object(s.useState)(!0),l=Object(i.a)(u,2),o=l[0],d=l[1],m=Object(s.useState)(null),b=Object(i.a)(m,2),f=b[0],O=b[1],g=Object(s.useState)(null),v=Object(i.a)(g,2),w=v[0],y=v[1],N=function(){var e=Object(h.a)(p.a.mark((function e(){var t,a,s,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae();case 2:t=e.sent,a=t.status,s=t.message,n=t.posts,"success"===a?c(n):O(s);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){N().then((function(){d(!1)}))}),[]);var k=function(){var e=Object(h.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(t);case 2:a=e.sent,"success"===a.status?(c(r.slice().filter((function(e){return e._id!==t}))),y("Post deleted successfully")):O("Failed to delete post. Try again");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)(j.a,{fluid:"lg",children:[Object(S.jsxs)(W.a,{className:"mx-auto",style:{maxWidth:"720px"},children:[Object(S.jsxs)(G.a,{xs:12,children:[Object(S.jsx)("h4",{className:"my-3 text-center",children:"\ud83d\udc4b Hi...  ".concat(t.name)}),Object(S.jsx)("hr",{className:"m-0"})]}),Object(S.jsx)(G.a,{xs:12,children:Object(S.jsx)("h4",{className:"my-2",children:"Currently Active Posts"})}),o&&Object(S.jsx)(x.a,{className:"my-5 m-auto",animation:"grow",size:"lg",variant:"primary"}),r.map((function(e,t,a){return Object(S.jsx)(ye,{post:e,removePost:k},e._id)})),!o&&0===r.length&&Object(S.jsx)("div",{className:"my-5 text-center",children:Object(S.jsxs)("h5",{className:"",children:["See this emptiness... ",Object(S.jsx)("br",{})," Why don't you share what you're looking forward to."]})})]}),f&&Object(S.jsx)(A,{variant:"warning",message:f,action:"Delete Post",callback:function(){return O(null)}}),w&&Object(S.jsx)(A,{variant:"success",message:w,action:"Delete Post",callback:function(){return y(null)}})]})}var ke=function(){var e=Object(s.useState)(!0),t=Object(i.a)(e,2),a=t[0],n=t[1],r=Object(s.useState)(!1),c=Object(i.a)(r,2),o=c[0],j=c[1],d=Object(s.useState)({}),m=Object(i.a)(d,2),b=m[0],p=m[1];return Object(s.useEffect)((function(){O().then((function(e){var t=e.signedin,a=(e.message,e.userInfo);t&&(j(!0),p(a))})).catch((function(e){return console.log(e)})).finally((function(){return n(!1)})),f.interceptors.response.use((function(e){return 401===e.data.status&&"revoked_token"===e.code&&setTimeout((function(){window.location="/"}),5500),e}),(function(e){return console.log(e),e.response}))}),[]),Object(S.jsxs)("div",{className:"App min-vh-100 d-flex flex-column site-bg",children:[Object(S.jsxs)(u.a,{children:[Object(S.jsx)(V,{resetUser:function(){j(!1),p({})},isAuth:o,user:b}),Object(S.jsx)("div",{className:"flex-grow-1 d-flex flex-column",children:!0===a?Object(S.jsx)(x.a,{className:"m-auto",animation:"grow",size:"lg",variant:"primary"}):Object(S.jsxs)(l.d,{children:[Object(S.jsx)(l.b,{exact:!0,path:"/",element:o?Object(S.jsx)(l.a,{to:"/home"}):Object(S.jsx)(l.a,{to:"/landing"})}),Object(S.jsx)(l.b,{path:"/home",element:o?Object(S.jsx)(le,{user:b}):Object(S.jsx)(l.a,{to:"/landing"})}),Object(S.jsx)(l.b,{path:"/profile",element:o?Object(S.jsx)(Ne,{user:b}):Object(S.jsx)(l.a,{to:"/landing"})}),Object(S.jsx)(l.b,{path:"/landing",element:o?Object(S.jsx)(l.a,{to:"/home"}):Object(S.jsx)(ge,{setUser:p,setAuth:j,isAuth:o})}),Object(S.jsx)(l.b,{path:"/verify/:userId",element:Object(S.jsx)(we,{})}),Object(S.jsx)(l.b,{path:"*",element:Object(S.jsx)(l.a,{to:"/"})})]})})]}),Object(S.jsx)(D,{}),Object(S.jsx)(B,{})]})},Se=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,289)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),s(e),n(e),r(e),c(e)}))};c.a.render(Object(S.jsx)(n.a.StrictMode,{children:Object(S.jsx)(ke,{})}),document.getElementById("root")),Se()}},[[275,1,2]]]);
//# sourceMappingURL=main.16ed328d.chunk.js.map